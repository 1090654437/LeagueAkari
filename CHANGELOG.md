# v1.2.2 DRAFT (2024-7-?)

## 新增

- 自动开启匹配功能将可以自行中断，根据设置策略。(#28)

- 自动禁用相关功能，现在可以选择空。空 ban 不会在自定义模式中生效。

- 提供了一个设置项，可以打开或关闭对局分析。

- [UNFINISHED] [测试] 提供一个 OP.GG 数据源，用于标记 ARAM 模式的符文指导功能。

- [UNFINISHED] 提供了一个自毁功能，用于移除 League Akari。

- [UNFINISHED] 根据战绩内容，分析某名玩家是否已遇到过，重点标记。

- [UNFINISHED] 生涯背景现在可以设置更多内容。

- [TODO] APP 模块设置项分离，需要迁移。

- [UNFINISHED] [NO NEED TO DOC] 辅助窗口置顶记录。

## 调整

- 将不再默认以管理员权限启动。

- 辅助小窗平衡性调整提示将提供颜色边框。(#34)

- 现在 LCU 连接行为将会在主进程进行，而不是依赖于渲染进程。

- 只有在首次进入房间内和首次进入英雄选择阶段辅助小窗才会出现。

- 自动返回房间功能现在会执行不同的等待策略，以防止返回房间行为在点赞事件之前执行：若在结算阶段 (WaitingForStats) 停留超过 7.5 秒，则返回房间；若在预结束阶段 (PreEndOfGame)，则等待点赞事件 3.5 秒，其间若出现点赞事件，则暂停返回房间流程；若在游戏结束阶段 (EndOfGame)，则在 0.5 秒后返回房间。

- 工具中的皮肤设置器已经移除，因为它不再有意义。辅助小窗的皮肤选择器仍可使用已有皮肤，但已默认关闭。

- [UNFINISHED] 现在小窗的秒退入口添加二次确认。

- 现在基于自定义网络协议，将可以在渲染进程中调试网络请求。

## 修复

- 在秒退惩罚时，自动匹配的问题。现在自动匹配功能将考虑秒退计时器。

- 现在的段位展示会正确地展示历史最高战绩（如果有）。

- 自动切换到对局页面设置无效的问题，之前会始终跳转到对局页面。

- 修复了使用状态栏图标关闭窗口时，窗口对象已经被销毁的问题。

- [UNTESTED] 修复了点赞接口调整导致的点赞失败问题。

# 开发

- 重构功能模块逻辑。现在不同功能拆分为单独模块，渲染进程订阅主进程模块以获取状态同步和方法调用。

- 渲染进程通过实现 `akari://` 自定义协议调用 LCU HTTP 接口，这将允许在渲染进程 DevTools 中查看网络请求。

# v1.2.1 (2024-05-13)

## 新增

- 提供了一个功能，可以设置聊天的在线状态文本信息。

- 提供了一个选项，现在在关闭主窗口时会确认是否退出应用程序。可选设置为最小化到托盘区或直接退出，默认为每次询问。设置后仍可在 `设置` -> `应用` -> `基础` -> `窗口关闭策略` 中重新设置。

- 提供了一个设置项，辅助窗口开启时且在完成英雄选择后，提供一个设置器，用以展示所有可选的英雄皮肤。位于 `设置` -> `通用` -> `辅助窗口` -> `皮肤设置器`。该选项默认开启。(#27)

- 辅助窗口在房间内时，会额外展示一些设置项。

- 现在辅助窗口可以设置大小比例，在 `设置` -> `通用` -> `辅助窗口` -> `缩放大小` 中设置。

- 在自动游戏流程的自动开始匹配中，添加了两个可用项：最小等待人数以及等待邀请中的玩家。

- 集成了外部数据源。包括使用 Fandom Wiki 的英雄平衡性数据。在 ARAM 模式中，在辅助窗口的英雄选择台悬停时会展示英雄平衡性修正数据。

- 在英雄选择阶段，被标记的玩家信息将通过仅自己可见的格式发送到聊天中。

## 调整

- 现在对局中分析的并发数调整为 3（原来是 10），这是更保守的策略，请求速度会显著变慢。

- 现在 KDA 发送在斗魂竞技场模式，会附带前四率而不是 KDA。

- 现在辅助窗口相关设置被归类到 `设置` -> `通用` -> `辅助窗口`。

- 现在使用 NtQueryInformationProcess 获取命令行信息。原有方式仍可通过 `设置` -> `应用` -> `基础` -> `使用 WMIC` 启用。

- 被标记的玩家在对局分析页面会有颜色变化。

## 修复

- 标记的用户在再次遇到时被覆盖标记的问题。

- 辅助窗口开启和关闭选项无效的问题。并且现在辅助窗口会锁定尺寸。(#26)

- 修复了乱斗随机选择在关闭设置项时仍继续选择的问题。

- 修复在主窗口被隐藏时，通过托盘区图标无法恢复显示的问题。

- 修复在非腾讯服时，玩家标记和记录功能出错的问题。

# v1.2.0 Ayano (2024-5-4)

## 重构

- 重构了项目结构。

## 新增

- 现在 League Akari 将会显示一个托盘区图标，用于快速最小化以及唤起副窗口。

- 提供了一个副窗口，其可指示一些正在进行的操作。托盘区 -> `League Akari` -> `显示小窗`。

- 现在可以标记玩家，并在下次遇到时加以提醒。

- 现在自动点赞和自动接受并入到 `游戏流` 模块中，位于 主页 `自动化` -> `流程` -> `游戏流`。

- 提供了一个基于键盘输入模拟的字符串发送机制，现在可以在**游戏中**发送自定义的文本，使用 `Delete` 快捷键。

- 提供了一个功能，可以在游戏结束时重新回到房间。位于 主页 `自动化` -> `流程` -> `游戏流` -> `自动回到房间`。

- 提供了一个功能，可以在可以开始匹配对局时开始匹配。位于 主页 `自动化` -> `流程` -> `游戏流` -> `自动匹配对局`。

- 现在 League Akari 会记录日志，日志将写入到程序目录下的 `logs/LeagueAkari_{datetime}.log`。可以通过 `设置` -> `调试` -> `日志` -> `日志目录` 来查看日志文件。

- 战绩页面的底部添加一个同样的翻页工具栏，同时翻页操作将触发自动滚动到顶部。(#21)

- 现在在登录排队时，会在标题栏展示一个倒计时，这个倒计时拥有更高的精度（相比客户端的预计 x 分钟）。

- 现在更多的状态会被展示到标题栏（包括自动开始房间匹配，自动接受对局）

- 提供了一个选项，用于控制对局分析模块中，整体的网络请求并发数限制。默认数量为最多同时进行 10 并发请求，且请求之前存在优先级限制。在 `设置` -> `通用` -> `对局分析` -> `对局中请求并发数`。

> 并发请求的优先级：召唤师信息 > 战绩页面 > 段位信息 > 具体对局。

- 提供了一个功能，可以在英雄选择完毕后设置皮肤。在 `工具` -> `过程中` -> `皮肤选择`。

> 皮肤设置功能会展示锁定英雄的所有当前可使用皮肤，**包括没有原皮肤的炫彩皮肤**。

## 调整

- 现在大部分自动化功能将列入额外的面板中，位于 主页 `自动化`。

- 为解决一些依赖问题，使用 yarn 作为包管理工具。

- 现在使用 SQLite3 数据库来记录大部分数据（而不是基于原本的渲染进程的 Local Storage）。之前的设置会正确地迁移。

- 在 KDA 发送功能中，移除了 `发送时附带免责声明` 设置项。

- 在自动选择 / 自动禁用功能中，移除了随机选择相关设置项。

- 更多的地方会展示 `tagLine`。

- HTTP API 请求的超时时间提高到 12.5 秒。

- 存储数据的数据库现在是 `LeagueAkari.db`，位于应用目录 `C:\Users\{Username}\AppData\Roaming\league-akari\LeagueAkari.db`。

- 现在部分软件内部的用户 ID 从 Summoner ID 更改为 PUUID。

- 对局分析的战绩拉取默认值调整为 20 场。

## 副窗口

在一些游戏状态（英雄选择、房间内）时，League Akari 会开启一个副窗口，用于指示即将进行的自动化操作，并提供一些快捷操作入口。

副窗口可以在 `设置` -> `通用` -> `使用辅助窗口` 开启或关闭。

使用标题栏的关闭按钮会暂时隐藏副窗口，仍可以通过 `托盘区图标` -> `辅助窗口` 展示。

## 修复

- 现在新的人机队列（如“新：一般级”）会被正确地识别为非 PVP 队列。（意味着它们不会被算作有效对局）

- 现在会优先使用玩家的 `gameName` 作为召唤师名称（`gameName` # `tagLine`）。非腾讯服的玩家会正确地展示 Riot ID。

- 现在数据库添加了额外的字段，以记录 League Akari 的使用者以及所属大区，避免潜在的混淆。

- 重生倒计时会在游戏结束时正确地清理状态。

- 现在游戏客户端会返回带有 tagLine 的召唤师名称，重生计时器将使用此。

- 现在随机模式的自动选择选项在开启或关闭时会立即生效。

- 现在会正确地展示斗魂竞技场的战绩。

# 1.1.4 (2024-3-30)

## 声明

在此提醒，LeagueAkari (原名 LeagueToolkit) 是**免费开源**软件，不需要通过任何付费手段获取。若您是通过非官方渠道被要求支付费用以下载或使用该软件，请谨慎对待。

## 新增

- 现在可以检测到多个已启动的客户端。

- 提供一个方式，可以断开 League Akari 与 LCU 的连接。位于 `设置` -> `进程` -> `League Client` -> `断开连接`。

- 提供了一个设置选项，当检测到当前启动的客户端唯一时自动连接。位于 `设置` -> `应用` -> `基础` -> `自动连接`

- 战绩详情表格增加了更多内容，包括队伍的英雄禁用情况、本局游戏的区服等。

- 提供了一个重生倒计时，当在游戏中阵亡时，将在应用标题栏展示一个倒计时，用于指示距离重生的剩余时间。该功能默认关闭，位于 `设置` -> `战绩` -> `通用` -> `重生倒计时`。实现参考 [League Respawn Timer](https://github.com/Coooookies/vscode-league-respawn-timer)。

## 修复

- 自动点赞的默认值有误，现在会默认为随机预组队成员。

## 优化

- 优化的 Tab 页面切换性能。[Issue #15](https://github.com/Hanxven/LeagueAkari/issues/15) [@watchingfun](https://github.com/watchingfun)

# 1.1.3 (2024-03-25)

本版本仅涉及到 BUG 更正。

## 声明

在此提醒，LeagueAkari (原名 LeagueToolkit) 是**免费开源**软件，不需要通过任何付费手段获取。若您是通过非官方渠道被要求支付费用以下载或使用该软件，请谨慎对待。

## 修复

- 后台 WinKeyServer.exe 残留，导致主程序无法退出完全，以及**全局**键盘输入卡顿问题。现在在退出时会强制结束该进程。

> 上述问题会导致后台大量 CPU 占用，以及影响**全局范围内**的键盘输入。

# 1.1.2 (2024-03-23)

项目更名、稳定性改进以及一些小型的新特性。

## 变更

由于 Github 已存在 **LeagueToolkit** 命名的项目，为避免与原有项目混淆，此项目更改为 **LeagueAkari**。

## 声明

在此提醒，LeagueAkari (原名 LeagueToolkit) 是**免费开源**软件，不需要通过任何付费手段获取。若您是通过非官方渠道被要求支付费用以下载或使用该软件，请谨慎对待。

## 新增

- 英雄搜索框现在可以通过名字模糊搜索。如搜索“戏命师”，可以匹配：ximingshi, 惜命是），戏命，ximsh，...。

> 暂时无法通过 LCU API 获取英雄的名字（如“彗”），只能获取称号（如“异画师”）。

- 结算自动点赞功能。

## 修复

- 现在应用了新的召唤师 ID 系统的大区，展示玩家名时不会出现错误的 “无名” 了。

## 调整

- 运行级别调整，解决部分使用者无法启动应用程序的问题。

- 终端依赖调整，解决部分使用者无法获取客户端启动状态问题。

# 1.1.1 (2024-02-17)

## 新增

- 现在可以在游戏中或英雄选择途中发送简略的队友或对手的近期平均 KDA 了。场次由 `对局战绩分析数量` 决定。使用 PageUp 发送己方队伍，使用 PageDown 发送敌方队伍。该功能默认关闭，请在 `设置` -> `战绩` -> `KDA 简报` -> `启用 KDA 发送` 中开启。

> 由于实现原理是模拟键盘输入（回车 -> 粘贴 -> 回车 -> ...），因此可以在发送**全程**按住 `shift` 将消息发送到全局。

> 在每场游戏的 `对局` 页面，可以控制具体发送哪些玩家的 KDA 简报。

- 现在会在聊天室自动输出一些**仅自己可见**的信息，用以指示部分功能的开启情况。

- 自动选择功能，提供了一个新选项：`预选英雄`。开启后，将自动将即将自动选择的英雄预选，以提示队友。

## 修复

- 修复了自动选择 / 禁用功能的一些问题，现在当已经预选英雄后，若已在期望列表中且策略为立即锁定，则会立即锁定该英雄。

- 修复了自动选择功能仍会尝试选择已经被禁用的英雄的问题。现在会额外检查一些内容。

# 1.1.0 (2024-02-05)

## 新增

- 支持查询具有 tag 的召唤师名称，如 `一色彩羽#123456`。输入时需包括 `#` 符号。

- 在随机模式的自动选择功能中，提供了一个选项：在聊天室中以**仅自己可见**的特殊消息，实时展示即将执行的选择操作。

## 修复

- 修复了一个错误，当自动选择英雄指定了多个英雄时，会出现无限循环选择的情况。

## 调整

- 重新修改了设置项的布局，功能介绍更加清晰。

- 出于效率考虑，现在将始终要求以管理员权限启动。因此，“尝试自动连接”设置项也被移除，现在将始终自动连接。

- 调整了命令行的执行方式。

- 使用 native 方法检查权限。

# 1.0.5 (2024-01-11)

## 新增

- 优化了自动选择英雄及禁用英雄功能。现在将根据预设的优先级列表进行操作，同时也会考虑队友的预选和禁用情况。同时，除了按照优先级选择之外，现在也允许随机挑选列表内的英雄进行选择或禁用操作。

## 修复

- 自动 ban 功能出现异常的问题。

- 在拒绝接受时自动取消自动接受。

- 修复竞技场战绩数据错误时，界面出错的问题。现在将尽可能展示内容。

- 修复关闭了自动连接，导致以管理员权限启动时不会连接的问题。

## 调整

- 现在对局中玩家卡片会展示标签“我”，以及“遇到过”标签不会对自己生效。

- 回调自动选择/自动禁用功能，现在在自定义对局也能生效。

# 1.0.4 (2024-01-06)

## 新增

- 在战绩页面，可以使用 `Ctrl+Left` 或 `Ctrl+Right` 来控制翻页了。

- 战绩卡片会额外展示一些统计信息。

- 自动禁用英雄功能。

## 调整

- 现在战绩页面列表的拉取详细战绩选项将默认开启。（在上个版本是默认关闭的）

- 连接到客户端时，若在管理员权限下，只有达到固定的试错次数时才会显示错误信息。

- “对局中”中，“生涯隐藏”、“胜率队”等样式不会对自己生效。

- 自动选择 / 自动禁用英雄不会在自定义对局中生效。

## 修复

- “对局中”页面的简易战绩列表中，训练模式对局的背景色和胜负将被灰色和“-”符号替代。

## 优化

- 在战绩页面，请求得到的的详细对局都会被部分缓存，以便复用并减少调用接口的次数。

# 1.0.3 (2024-01-01)

新年快乐！

## 新增

- 新增设置选项（设置 -> 战绩 -> 通用 -> 拉取详细对局），允许在加载战绩列表时同时获取详细战绩信息。该选项默认关闭。请注意，频繁的接口请求可能触发服务器限制，因此请避免短时间内频繁请求战绩数据。

- 战绩卡片现在在获取了详细对局数据时，会在右侧显示该局游戏的玩家列表。（本功能其实早该实现了）

## 修复

- 修复了在战绩页面，当未输入页码时，获取战绩数据出现范围错误的问题。现在默认总是设为第 1 页。

- 补充了对局中玩家卡片中竞技场统计为空的默认占位元素。

## 调整

- 底层依赖更新 (vue => 3.4, electron => 28.1, 等)。

- 进行了一些微小的样式调整和改进。

# 1.0.2 (2023-12-31)

## 新增

- 提供了一个选项，当启动时，通过 Github 检查更新。该选项默认是开启的。

# 1.0.1 (2023-12-30)

## 调整

- 调整获取 LCU 命令行的方式。

- 在英雄选择台，给不可选择的英雄添加一个视觉效果并使其无法选定。

# 1.0.0 (2023-12-17)

版本发布。
